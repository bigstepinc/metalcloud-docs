# Release notes


### 4.7 - 17 December 2020
This is a minor release that was focused on adding new switch drivers, especially M-LAG support for Cumulus and improving the admin UI.

Here are the highlights:

#### Networking
- M-Lag support for Cumulus 4.x
- Support for Cumulus 4.x switches
- Switch provisioning performance improvements
- Support for having multiple subnets at the same WAN L2 broadcast domain

#### Applications
- The Kubernetes cluster app is now visible to all users - beta
- The VMWare application now available to admin users only - beta

#### Admin updates
- Improved server section which now includes better monitoring graphs, better network connections page with better organized information
- Redesigned admin upper-right menu (the infrastructure editor link is now in this menu).
- Removed the top 3 elements of the sidebar to reduce clutter, combined dashboard and mapview and datacenter view into the same page.
- The dark mode of the Admin UI has been greatly improved and it is now the default
- The datacenter's Topology view now loads much faster and looks better

#### CLI updates
- The CLI now supports an apply command similar to Kubernetes.
- The CLI now has improved support for template handling

#### Core
- Support for collecting the IPMI's credentials using the Admin UI for servers that need to preserve their username and password during registration
- Support for tenant access to IPMI

#### Templates
- Provided kickstart based, editable local install templates for CentOS 8, Ubuntu 20.04, ESXI, Windows 2019. All these templates are available on [MetalSoft's Github repository](https://github.com/metalsoft-io/os-templates-examples)
- Proxy support in OS template installation
- Support for generating and using default passwords for OS templates
- Added support for creating user accounts from the admin UI
- Added better support for L2-only environments

We have also transferred the CLI, the GO SDK and other repositories from the Bigstep Github account to the MetalSoft-io github account.

#### Changelog - Improvements
Issue key	Summary
BSI-12188	Replace discs with Storage in server types
BSI-12301	Server Overview page >> display a confirmation message when updating successfully the IPMI credentials 
BSI-10765	Implement new monitoring tab on the servers page in the Admin UI
BSI-10586	Server details UI >> double-clicking the IPMI internal username should select only the value
BSI-10650	Upload ansible bundle form >> after a successful submission notify the user and refresh the list
BSI-10776	Workflow editor UI >> the UI should be consistent when using stage or task (replace task with stage)
BSI-12559	Enable kubernetes cluster for everybody
BSI-12314	Remove view your OS assets link
BSI-12292	Add support for --use-autogenerated-initial-password in metalcloud-cli
BSI-12274	Server Overview page >> fetching data for the charts should not block displaying the rest of the content
BSI-12370	Rename fields in the datacenter configuration page
BSI-12342	Update the Datacenter create and Datacenter config update forms to show the new API property enableTenantAccessToIPMI
BSI-10627	Workflow tasks >> enhance the interface to allow users to edit ansible_bundle_type/title and description properties
BSI-11047	Remove in-place editing for label property in stage definition editor
BSI-12195	Using the CLI  and Using Terraform links should be opened in a new tab
BSI-12234	Improvements to topology view
BSI-12244	Manage switch page >> display the datacenter in the Overview tab
BSI-12166	Network Interfaces -> when clicking the IP addresses the user should be sent to other pages than Subnet pool pages
BSI-12299	Server Overview page >> the Configuration text should contain the local disks specs if exist
BSI-12152	Move add new datacenter agent button to datacenter configuration tab
BSI-12337	User create form >> "Access level" label should be spelled as "Initial access level" as mentioned in the mockup
BSI-12317	Server type create form >> set the increase/decrease unit to 1 for the RAM slider
BSI-12311	Add label to os-template section
BSI-12246	Datacenter form  >> add a help text for "Network is Flat L2 only" check-box
BSI-12228	Add create user form in the UI
BSI-11271	Make templates section show volume templates too
BSI-12296	Server types page >> display the Create new server type button
BSI-11356	Workflow editor UI >> Add task form >> the Run level field should be pre-filled or it should contain a text with an example
BSI-12295	Server type create form >> add info text below the "GPU vendors" and "GPU models" fields containing the allowed input format or a valid example
BSI-12077	Server Details page >> add Copy button/ link to ease copying the IPMI username from "Management (iDRAC/IPMI) section"
BSI-12319	Server Details page>> remove the Server Status drop-down from the Advance tab
BSI-12327	The Server Overview page should display the datacenter name
BSI-11425	Split create new SSH exec stage definition into multiple fields
BSI-12445	Create a dark mode version for the OS Asset Content Editor
BSI-12196	Add Refresh firmware information button
BSI-12336	Create user form >> remove the colon(:) punctuation mark for all the field labels
BSI-12140	 Add support for GPU in the server type create form
BSI-12313	Rename Boot Process to Bootloader

#### Changelog - Bug Fixes
Issue key	Summary
BSI-12162	Network Interfaces -> the interfaces should be displayed in ascending order stating with '#1'
BSI-12161	Network Interfaces -> typo in 'NOT IN USED' status
BSI-12302	Server Overview page >> the tag's X button is not visible when the dark mode is enabled
BSI-12300	Server Overview page >> The new layout looks different on a browser not opened in full-screen
BSI-12335	Create user form >> clear the error message(if exist) when the form is opened
BSI-11112	Variables specific -> Content box should be bigger
BSI-11156	Create stage definition (HTTP Request) -> 'HTTP Request' form is different than the mock-up 
BSI-11286	Create stage definition(SSHExec) -> the title of the form should be 'Create SSH Exec stage definition'
BSI-11155	Create stage definition -> the drop-down should contain the options displayed in the mock-up
BSI-12332	BMC name hardcoded
BSI-11297	Stage definitions -> an error is displayed 'API_Exception: [PHorse\Validators\URL\Exception] Missing scheme separator ':'. (Code: 165)' when trying to edit the description
BSI-11127	OS templates -> the 'OS Template architecture' option should be named 'Boot methods supported'
BSI-11157	Create stage definition (Copy File) -> 'Create Copy File stage definition' form is different than the mock-up
BSI-10946	Monitoring tab: Align the centers of the quick intervals
BSI-11341	Workflows/ Stage definitions -> the pop-up message should be changed to 'Are you sure you want to mark workflow <workflow-title> (workflow-label) as deprecated? This operation cannot be reversed!" [Continue] cancel '
BSI-11111	Variables specific -> Content section is missing texts 'Variable content (max 128 KB)' and 'Warning: Never store passwords, use secrets instead.'
BSI-11113	Variables specific -> 'Owner id' and 'Owner' should display the information with blue color as a link
BSI-11154	Fix the Romanian version of InstanceArray create form
BSI-12303	General UI issue >> duplicate X icons for error messages
BSI-12331	Create user form >> fix the modal title CREATE_USER_MODAL_TITLE
BSI-12345	SSHExec create form >> highlight the Label field as required
BSI-12355	SSHExec create form >> add UI string length validation for these fields: Hashed key,Private key, Passphrase, Hash algorithm
BSI-11001	Asset content page -> an error is displayed "Unhandled Promise Rejection: TypeError: t.text is not a function. (In 't.text()', 't.text' is undefined)" when trying to upload a text file using OSX & Safari
BSI-11290	Create stage definition (Workflow Reference) -> 'Workflow Reference' form is different than the mock-up
BSI-11289	Create stage definition (Ansible Bundle) -> 'Ansible Bundle' form is different than the mock-up
BSI-12427	In the Datacenter Configuration tab, the "Show advanced configuration options" text is displayed only at mouse hover
BSI-11193	HTML console ->the HTML console link is not displayed in the InstanceArray form for Windows instances
BSI-11263	Add datacenter agents -> unexpected error if the logged-in is not authorized [Internal error: PHorse\Utils\JSONException] Malformed UTF-8 characters, possibly incorrectly'
BSI-12283	Server Overview page >> double clicking the IPMI username value also selects the Label
BSI-12289	Server types page >> wrong value displayed in the "Boot type" field.
BSI-12343	server_type_create does not add any gpu information
BSI-12344	Open the Stage Definition Details page after creating a SSHExec
BSI-12352	SSHExec create form >> missing Compress drop-down mentioned in the main task
BSI-11122	OS templates -> the 'Upload asset' form is different than the mock-up form
BSI-11404	Run workflow -> missing information about auto-generated stage definition in the Run workflow form
BSI-11118	Variables -> the Variable update form should not exist
BSI-11325	Workflows -> the Owner field shows 'N/A' when the workflows are public and created by other user
BSI-12495	Unexpected error when querying  the _agents table via search() API: Some properties are neither Public nor Private in function search. Please add it to one of the two lists:
BSI-12496	Unexpected error when querying  the _chassis_racks table via search() API: Some properties are neither Public nor Private in function search. Please add it to one of the two lists:
BSI-12458	The Version drop-down should be populated for a VMWare cluster 
BSI-11138	Multi-server enclosures -> the 'Create chassis rack' button is named 'Create secret' in Create chassis rack form
BSI-11125	OS templates -> the drop-downs from 'Boot process' tab are too large
BSI-12538	Add error code for "Cannot force ipv4 IPs from a subnet pool that is not force-only enabled" exception
BSI-12464	Searching into the _datacenter_resources table using the public search API results in this error: Some properties are neither Public nor Private in function search. Please add it to one of the two lists
BSI-11842	Independent instance create form >> fix the form after the latest API changes >> "Too many parameters for method independent_instance_create."
BSI-12278	OS template >> removing an OS Asset fails with "Parameter nOSAssetID cannot be NULL."
BSI-12276	OS Asset create form >> unexpected error Failed to execute 'btoa' on 'Window'
BSI-12277	OS Asset create form >> unable to create an asset by uploading a binary due to " Error: [Error] Unhandled type detected in FileToBase64Text: string"
BSI-12334	Create user form >> unable to re-submit the form after this error occurs: "The currently authenticated user may set only these access levels"
BSI-12330	Create user form >> refresh the Users list to display the last user created
BSI-12297	Server type create form >> the GPU fields are not saved
BSI-12329	Server Power button >> after performing a power operation the last used button becomes disabled 
BSI-11114	Variable update content UI >> unexpected error "Cannot run json_decode() on empty string."
BSI-11368	Secrets UI >> Edit link has no functionality, nothing happens at click
BSI-12398	Reallocate cancellation operation fails with: "Could not find user row for `user_id`=2166"
BSI-10994	OS Asset create UI -> unable to create an os asset due to unexpected error message  'Failed base 64 decode on os_asset_contents_base64'
BSI-11287	Create stage definition (SSH Exec) -> 'SSH Exec' form is different than the mock-up
BSI-12411	Server type create form closes unexpectedly when trying to edit the GPU count slider: Unchecked runtime.lastError: The message port closed before a response was received.
BSI-12384	Section selection line not present on some pages
BSI-12497	Unable to query the: _switch_interfaces: table using the search() API function due to this error: " Some properties are neither Public nor Private in function search. Please add it to one of the two lists: {"
BSI-12498	Unable to query the: _user_suspend_reasons: table using the search() API function due to this error: " Some properties are neither Public nor Private in function search. Please add it to one of the two lists: {"
BSI-12500	Unable to query the: _instances_server_interfaces: table using the search() API function due to this error: " Some properties are neither Public nor Private in function search. Please add it to one of the two lists: {"
BSI-12499	Unable to query the: _license_installments: table using the search() API function due to this error: " Some properties are neither Public nor Private in function search. Please add it to one of the two lists: {"
BSI-11399	Workflow Editor >> New Stage form >> filter the values displayed in Stage type drop-down
BSI-12440	Unable to create a server type when submitting the form with the default Disk type(HDD):  Server has local disks. Prop server_disk_type can't be none
BSI-10549	Subnet pools UI >> Missing Create subnet pool button
BSI-12258	cloud.poc2.metalsoft.io (Ocient) >> The Browser SSH client authentication fails with  ERR_ADDRESS_UNREACHABLE
BSI-12291	OS Template page >> when the accessing Boot process tab, the OS bootloader asset and  Installer bootloader asset dropd-downs should be populated  with the current assets
BSI-12353	Detailed Utilization Report page crashes when any of the rendered server types was deleted: Undefined offset 6
BSI-12412	Error at instance_storage_availability_check when deploying a second VMware cluster
BSI-12386	grantCustomerAccessToServerIPMI fails with "Undefined variable: objServer" when provisioning an iSCSI instance on a datacenter with enableTenantAccessToIPMI set as True
BSI-11357	Workflow Editor -> when adding a new stage the editor is not scrollable
BSI-12410	Unexpected crash when trying to create a server type with GPU count:0
BSI-12473	The Server Details page goes blank  for servers with server_vendor_info_json:null >> Cannot read property 'management' of null
BSI-12490	Unable to query the: _os_assets: table using the search() API function due to this error: " Some properties are neither Public nor Private in function search. Please add it to one of the two lists: { os_asset_variable_names_required_json"
BSI-12469	Integration crash in BDK 
BSI-12541	The WAN IPv4 subnet pool drop-down is wrongly populated with Automatic when network_equipment_force_subnet_pool_ipv4_wan_id is not Null

### R4.6 - 26 October 2020
This is a minor release that was focused on adding new switch drivers and to improve the admin UI. Here are the highlights:

1. **Various bug fixes and stability improvements**

   We have added numerous minor bug fixes and stability improvements.

1. **Independent instances improvements**

   The support for independent instance was improved to minimize deploy time and the ability to use a secondary drive was added.
   
2. **Template whitelist support**

   We added a whitelist support feature to enable matching templates to server types configuration. This would enable fine control 
   over what template is supported on what server type.

   New templates will be released only for certain types of servers.

3. **Homepage updates**
   
   The homepage has been updated to make it easier to spot the infrastructure editor link. It also includes documentation links towards the CLI and the Terraform provider.


### R4.5 - 12 August 2020
This is a minor release that was focused on bug fixes and to add basic variable support. Here are the highlights:

1. **UI Improvements**

   We fixed a range of bugs in the Servers page, Storages page, Storage Templates page, Variables pages, Workflow page 
	and a few more other bugs in the Multi-server enclosures pages. 
2. **Metalcoud CLI**

   We added variables to OS assets and missing shared drive functions. 
   Support for subnets and switches is now possible from the CLI. Also the CLI now has updated yaml format configuration for all commands.
3. **Monitoring agent updates**

   The new improved monitoring agent will be released, with enhancements for data measurements and SNMP pooling. The new implementation allows
better monitoring capabilities and more exact SFLOW measurements.
4. **Switch provisioning**

   We continued the work on the switch provisioning from the previous release.We improved the switch provisioning layer to always use the caching layer, that would provide improved speed in switch provisioning operations. We also removed reconnects for HP switches which improves deploy time.
   
5. **OS Template API improvement**
 
   The OS template API has now the ability to use variables for templates.


### R4.4 - 9 July 2020
This is a minor release that was focused on improving deploy speed and fix bugs. Here are the highlights:

1. **Improve deploy speed for Windows**

   This new deploy method improves boot times for Windows images and provides the fixes needed to boot the image fast.If the server is already powered up then we also added some time optimisations.

2. **DC agent stability fixes and performance optimisations for very high latency networks**

   We have introduced performance optimisations in very high latency environments and in environments that have 1000+ VLANs. The system is able to perform well under these 
   special conditions and agents are able to fully manage this kind of environments. We also fixed some stability issues for DC agents triggered by the high latency environments.

3. **Workflow UI improvements and improved usage reports**

    We improved the Workflow UI interface with correct sort options, adding a Run now button and by adding confirmations for delete and fixing new stage form. We improved the usage reports with fixes for Windows usage.

4. **Monitoring agent improvements**

    The monitoring agent has a new time series database implementation that will add the ability to display additional details in the monitoring tab and will improve monitoring in general. The monitoring agent implementation was improved and the agent will be able to also add metadata to data. 

5. **Subnet pools, storage pools and search API**

    We added UI and API fixes to subnet pools and enhanced the storage pools create APIs. We also improved the search API functionality for all search APIs in all forms.  

### R4.1 - 21 April 2020
This is a minor release that was focused on improving usability. Here are the highlights:

1. **New instance array create form**

    This new form is not just easier to understand for new users but also supports local install better. Moving forward the templates will be depending on the server type selected meaning some templates, especially Windows templates which are hardware dependent will only be available to some server types and this form supports this approach. This will avoid some corner cases where specific hardware are incompatible with certain templates and the user was allowed to proceed with the deploy.

2. **New GPU Instances**

    We are introducing new GPU instances: the M.4.16.1G and the M.8.32.1G. These feature a NVidia Tesla T4 16GB GPU. They are currently available only to beta customers but if you are interested get in touch with us. We are also able to source NVIDIA GRIDD Drivers which enable many scenarios such as VDI or power workstation.

3. **Boot customization support**

    We are now introducing a new mechanism that allows users to automate boot processes which can be used to perform custom OS installs such as perform unattended Gentoo deployment on local drives. This is currently possible only via the CLI. See [Creating a local install os template](/advanced/creating_a_local_install_os_template) for more details.

4. **CLI updated**

    The CLI, now at 1.5.5 is now fully features and can perform all actions possible via the UI and more.

5. **Windows 2019 template available**

    This new Windows template is currently only available for **M.8.8**, **M.8.16**, **M.8.32 (v1)**, **M.4.16.1G**, **M.8.32.1G** server types and only for diskless setups.


### R4.0 - 12 March 2020

This is a major release that was focused on improving reliability. Here are the highlights:

1. **Support for local install**

    We now have very extensive support for local install. Users are now able to select the "install on local disks" option which has a separate set of templates.

2. **Support for pre and post deploy workflows**

    Users can now attach Anisble tasks to infrastructures which are executed when the infrastructures are updated (deployed). This allows users to perform tasks such as updating loadbalancing configurations upon instance array expand, or install pre-requisite software on nodes when the nodes are deployed.

3. **Many bug fixes and improvements**

    This release was focused on improving reliability and ease of use and many bugs specially around networking provisioning has been addressed.


